<html lang="en" ng-app="musicViz">
    <head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1, user-scalable=no">
      <meta http-equiv="X-UA-Compatible" content="IE=edge" >

      <title>Web Audio</title>
      <!-- script -->
      <script src="libs/three.min.js" defer></script>
      <script src="libs/angularjs-1.3.14-angular.min.js" defer></script>
      <script src="js/app.js" defer></script>
      <script src="js/controller.js" defer></script>
      <script src="js/soundcloud_service.js" defer></script>
      <script src="js/audio_service.js" defer></script>
      <script src="js/graphics_helper.js" defer></script>
      <script src="js/graphics.js" defer></script>
      <script src="js/filters.js" defer></script>

      <!-- style -->
      <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
      <!-- <link href='https://fonts.googleapis.com/css?family=Roboto+Mono' rel='stylesheet' type='text/css'> -->
      <link rel="stylesheet" type="text/css" href="css/style.css">
      
    </head>
    <body ng-controller="musicVizController as ctrl">

      <div ng-mousemove="ctrl.handleMouseMove()">

        <nav ng-show="ctrl.showMenus" class="navbar navbar-inverse navbar-fixed-top">
          <form class="navbar-form navbar-left" role="search">
            <div class="form-group">
              <!-- TODO: replace with SoundCloud logo -->
              <label for="search-soundcloud">Search SoundCloud</label> 
              <input ng-model="ctrl.searchQuery" type="text" class="form-control" id="search-soundcloud" placeholder="Kanye West">
            </div>
          </form>
        </nav>

        <div ng-show="ctrl.showMenus" class="static" id="search-results">
          <ul class="list-group">
            <!-- TODO: add filter for longer names -->
            <li ng-class="{'list-group-item':true, 'active':hovering}" 
                ng-mouseenter="hovering=true"
                ng-mouseleave="hovering=false"
                ng-repeat="result in ctrl.searchResults | streamable">

                {{ result.title }}
                <div class="pull-right">
                  <button ng-click="ctrl.selectTrack(result)" class="btn btn-small btn-default"><span class="glyphicon glyphicon-play"></span></button>
                  <button ng-click="ctrl.addToTrackQueue(result)" class="btn btn-small btn-default"><span class="glyphicon glyphicon-plus"></span></button>
                </div>
            </li>
          </ul>
        </div>

        <div ng-show="ctrl.showMenus" class="static" id="track-queue">
          <p style="color: white;">Track Queue:</p>
          <!-- TODO: add track directive with picture thumbnail and artist info -->
          <p ng-repeat="track in ctrl.trackQueue track by $index" style="color: white;">{{ track.title + ', ' + track.user.username }}</p>
        </div>

        <div id="canvas-wrapper"></div>

        <footer ng-show="ctrl.showMenus">
          <div class="container">
            <div class="row">
              <p>{{ ctrl.currentTrack ? ctrl.currentTrack.title + ' by ' + ctrl.currentTrack.user.username : '' }}</p>
            </div>
            <div class="row">
              <div class="col-md-offset-4 col-md-4" id="audio-wrapper"></div>
              <button ng-click="ctrl.nextTrack()" 
                      ng-disabled="!ctrl.nextTrackAvailable"
                      class="col-md-1 btn btn-default"><span class="glyphicon glyphicon-forward"></span></button>
            </div>
          </div>
        </footer>

      </div>
    </body>
</html>